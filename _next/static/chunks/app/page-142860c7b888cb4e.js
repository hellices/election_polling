(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{36899:(e,t,a)=>{Promise.resolve().then(a.bind(a,79259))},79259:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var s=a(95155),l=a(12115),n=a(83540),r=a(53989),c=a(94754),d=a(96025),i=a(16238),x=a(94517),o=a(24026),m=a(21374),h=a(45164);let p=e=>{let{active:t,payload:a,label:l}=e;if(t&&a&&a.length>0){var n;let e=null==(n=a[0])?void 0:n.payload,t=null==e?void 0:e.agency;return(0,s.jsxs)("div",{className:"bg-white p-4 border rounded-lg shadow-lg",children:[(0,s.jsxs)("p",{className:"font-semibold mb-2",children:[new Date(l).toLocaleDateString("ko-KR")," (",t,")"]}),a.map((e,t)=>(0,s.jsxs)("p",{style:{color:e.color},className:"text-sm",children:[e.name,": ",Number(e.value).toFixed(1),"%"]},t))]})}return null};function u(e){let{data:t,onDateRangeSelect:a}=e,u=["#2563eb","#dc2626","#16a34a","#ca8a04","#9333ea","#475569","#ec4899","#14b8a6"],[g,j]=(0,l.useState)(null),[y,b]=(0,l.useState)(null);if(!t||0===t.length||!t[0])return(0,s.jsx)("div",{className:"text-center text-gray-400",children:"데이터가 없습니다."});let f=Object.keys(t[0]).filter(e=>"date"!==e&&"agency"!==e);return(0,s.jsxs)("div",{className:"w-full h-[600px] p-4",children:[(0,s.jsx)(n.u,{width:"100%",height:"100%",children:(0,s.jsxs)(r.b,{data:t,margin:{top:20,right:30,left:20,bottom:20},onMouseDown:e=>{e&&e.activeLabel&&j(e.activeLabel)},onMouseMove:e=>{e&&e.activeLabel&&g&&b(e.activeLabel)},onMouseUp:()=>{if(!g||!y||!a){j(null),b(null);return}let e=new Date(g),t=new Date(y);e.setHours(0,0,0,0),t.setHours(23,59,59,999),e>t&&([e,t]=[t,e]),a(e,t),j(null),b(null)},children:[(0,s.jsx)(c.d,{strokeDasharray:"3 3",opacity:.3}),(0,s.jsx)(d.W,{dataKey:"date",tickFormatter:e=>new Date(e).toLocaleDateString("ko-KR")}),(0,s.jsx)(i.h,{domain:[0,100]}),(0,s.jsx)(x.m,{content:(0,s.jsx)(p,{})}),(0,s.jsx)(o.s,{}),f.map((e,t)=>(0,s.jsx)(m.N,{type:"monotone",dataKey:e,name:e,stroke:u[t%u.length],strokeWidth:2,dot:!1},e)),g&&y&&(0,s.jsx)(h.T,{x1:g,x2:y,strokeOpacity:.3,fill:"#8884d8",fillOpacity:.2})]})}),a&&(0,s.jsx)("div",{className:"text-center text-xs text-gray-500 mt-2",children:"* 차트에서 드래그하여 날짜 범위를 선택할 수 있습니다."})]})}var g=a(54239);a(35279);let j=["더불어민주당","국민의힘","조국혁신당","개혁신당","진보당","기타정당","지지정당 없음","모름/무응답"];function y(){let[e,t]=(0,l.useState)([]),[a,n]=(0,l.useState)([]),[r,c]=(0,l.useState)([]),[d,i]=(0,l.useState)(null),[x,o]=(0,l.useState)(null),m=e=>{if(0===r.length)return[];let t=e.filter(e=>r.includes(e.agency));return d&&(t=t.filter(e=>new Date(e.date)>=d)),x&&(t=t.filter(e=>new Date(e.date)<=x)),t.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())};(0,l.useEffect)(()=>{(async()=>{try{let e="localhost"===window.location.hostname?"":"/election_polling",a=await fetch("".concat(e,"/data/party-support.json")),s=(await a.json()).partySupport||[],l=[...new Set(s.map(e=>e.agency))];if(n(l),c(l),s.length>0){let e=s.map(e=>({date:e.date,agency:e.agency,...e.support}));t(e)}}catch(e){console.error("Error fetching data:",e)}})()},[]);let h=e=>{c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,s.jsxs)("main",{className:"flex min-h-screen flex-col items-center p-8 md:p-24 space-y-12",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"대한민국 선거 지지율 추이"}),(0,s.jsxs)("section",{className:"w-full max-w-5xl",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-center",children:"정당 지지율 현황"}),(0,s.jsxs)("div",{className:"mb-6 p-4 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"조사기관 필터"}),(0,s.jsx)("button",{onClick:()=>{r.length===a.length?c([]):c([...a])},className:"text-sm text-blue-600 hover:text-blue-800",children:r.length===a.length?"전체 해제":"전체 선택"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-4",children:a.map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:r.includes(e),onChange:()=>h(e),className:"form-checkbox h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"text-sm",children:e})]},e))})]}),(0,s.jsxs)("div",{className:"mb-6 p-4 border rounded-lg",children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"기간 검색"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"달력에서 날짜를 선택하거나, 아래 차트에서 직접 드래그하여 기간을 선택할 수 있습니다."}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{htmlFor:"startDate",className:"text-sm whitespace-nowrap",children:"시작일:"}),(0,s.jsx)(g.Ay,{id:"startDate",selected:d,onChange:e=>i(e),dateFormat:"yyyy-MM-dd",className:"border rounded p-1 text-sm",placeholderText:"시작일 선택"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{htmlFor:"endDate",className:"text-sm whitespace-nowrap",children:"종료일:"}),(0,s.jsx)(g.Ay,{id:"endDate",selected:x,onChange:e=>o(e),dateFormat:"yyyy-MM-dd",className:"border rounded p-1 text-sm",placeholderText:"종료일 선택"})]}),(d||x)&&(0,s.jsx)("button",{onClick:()=>{i(null),o(null)},className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"날짜 필터 초기화"})]})]}),(0,s.jsx)("div",{className:"mb-8 p-4 border rounded-lg shadow",children:(0,s.jsx)(u,{data:m(e),onDateRangeSelect:(e,t)=>{i(e),o(t)}})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"정당 지지율 상세 데이터"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border shadow-sm rounded-lg",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"조사기관"}),(0,s.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"조사 종료일"}),j.map(e=>(0,s.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e},e))]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m(e).map((e,t)=>(0,s.jsxs)("tr",{className:t%2==0?"bg-white":"bg-gray-50",children:[(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.agency}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:e.date}),j.map(t=>(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:void 0!==e[t]?"".concat(e[t],"%"):"-"},t))]},t))})]})}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"표의 내용이 많을 경우 좌우로 스크롤하여 모든 정당의 지지율을 확인할 수 있습니다."})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[302,20,579,871,441,684,358],()=>t(36899)),_N_E=e.O()}]);